<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/style1.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style2.css">
    <link rel="stylesheet" type="text/css" href="assets/css/header.css">
    <title>Contactame</title>
    <link rel="icon" href="assets/img/icon2.png">
</head>

<body>
    <header class="header-container">
        <nav>
            <a href="index.html"><img src="assets/img/icon/icon-home.png" alt="" height="32px" width="32px"></a>
            <a href="child1.html"><img src="assets/img/icon/icon-about.png" alt="" height="32px" width="32px"></a>
            <a href="#top"><img src="assets/img/icon/icon-form.png" alt="" height="32px" width="32px"></a>
        </nav>
    </header>
    <section id="top">
        <div class="flex-container">
            <div class="contact-msg">
                <h1>CONTACTO</h1>
                <p>¿Te gustaría explorar mis ideas e inspiración en tu projecto o realizar una colaboración juntos?</p>
                <p>Llena el siguiente formulario con tu información personal o de empresa.</p>
                <p>Esta información me llegará a mi mail personal.</p>
                <p>¡Escucho abiertamente propuestas de colaboración y similares!</p>
            </div>
        </div>
        <div class="quote">
            <div class="form">
                <form onsubmit="return val()" id="form-c">
                    <div class="sep">
                        <label for="name">Nombre <strong>*</strong></label>
                        <input id="name" autofocus>
                    </div>
                    <div class="sep">
                        <label for="email">Email</label>
                        <input id="email">
                    </div>
                    <div class="sep">
                        <label for="message">Mensaje <strong>*</strong></label>
                        <textarea id="message" rows="5"></textarea>
                    </div>
                    <div>
                        <button class="sub-btn" type="submit">Enviar</button>
                    </div>

                    <div id="advs">

                    </div>
                </form>
            </div>
        </div>
        <div id="msgs">
        </div>
    </section>
</body>

<script>
    let first = document.querySelector("form input");
    first.focus();

    let regEx = /^\w+([-_.]?\w+)*@\w+([-_.]?\w+)*\.\w{2,}$/;

    function val() {
        let name = document.querySelector("#name");
        name.classList.remove("error");

        let email = document.querySelector("#email")
        email.classList.remove("error");

        let message = document.querySelector("#message");
        message.classList.remove("error");

        let advsList = document.querySelector("#advs")
        advsList.innerHTML = "";
        advsList.style.display = "none";

        let messageList = document.querySelector("#msgs")

        let check = false;

        if (name.value == "") {
            name.classList.add("error");
            let p = document.createElement("p");
            p.innerHTML = "El campo -Nombre- está vacío.";
            advsList.appendChild(p);
            check = true;
        }

        if (message.value == "") {
            message.classList.add("error");
            let p = document.createElement("p");
            p.innerHTML = "El campo -Mensaje- está vacío.";
            advsList.appendChild(p);
            check = true;
        } else if (message.value.length > 300) {
            message.classList.add("error");
            let p = document.createElement("p");
            p.innerHTML = "El mensaje es demasiado largo. Límite de carácteres soportados: 150. Caracteres del mensaje actual: " + message.value.length + ".";
            advsList.appendChild(p);
            check = true;
        }

        if (email.value != "" && !regEx.test(email.value)) {
            email.classList.add("error")
            let p = document.createElement("p");
            p.innerHTML = "Email inválido";
            advsList.appendChild(p);
            check = true;
        }

        if (check) {
            advsList.style.display = "initial";
            return false;
        } else {
            let p = document.createElement("p");
            if (email.value != "") {
                p.innerHTML =
                "Enviado con éxito. Se envió el siguiente mensaje: \n"
                + name.value + ".\n"
                + message.value + "\n"
                + email.value;
            } else {
                p.innerHTML = 
                name.value + ".\n"
                + message.value;
            }
            advsList.append(p);
            document.forms["form-c"].reset();
            let first = document.querySelector("form input");
            first.focus();
        }
        return false;
    }
</script>

</html>